{"title":"JavaScript中柯里化（函数化编程）","date":"2021-11-10T16:00:00.000Z","date_formatted":{"ll":"Nov 11, 2021","L":"11/11/2021","MM-DD":"11-11"},"link":"2021/11/11/详解JavaScript柯里化（函数化编程）","tags":["JavaScript"],"updated":"2022-02-24T13:42:11.906Z","content":"<h1 id=\"柯里化\">柯里化<a title=\"#柯里化\" href=\"#柯里化\"></a></h1>\n<blockquote>\n<p>维基百科：是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术</p>\n</blockquote>\n<h1 id=\"目录\">目录<a title=\"#目录\" href=\"#目录\"></a></h1>\n<ul>\n<li><a href=\"#%E5%8F%82%E6%95%B0%E5%A4%8D%E7%94%A8\">参数复用</a></li>\n<li><a href=\"#%E6%8F%90%E5%89%8D%E7%A1%AE%E8%AE%A4\">提前确认</a></li>\n<li><a href=\"#%E5%BB%B6%E8%BF%9F%E8%BF%90%E8%A1%8C\">延迟运行</a></li>\n<li><a href=\"#%E6%80%A7%E8%83%BD%E6%96%B9%E9%9D%A2\">性能方面</a></li>\n</ul>\n<h1 id=\"参数复用\">参数复用<a title=\"#参数复用\" href=\"#参数复用\"></a></h1>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">sum</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">function</span>(<span class=\"params\">x</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x + <span class=\"number\">4</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> m = <span class=\"title function_\">sum</span>()</span><br><span class=\"line\"><span class=\"title function_\">m</span>(<span class=\"number\">1</span>) <span class=\"comment\">// 5</span></span><br><span class=\"line\"><span class=\"title function_\">m</span>(<span class=\"number\">2</span>) <span class=\"comment\">// 6</span></span><br><span class=\"line\"><span class=\"title function_\">m</span>(<span class=\"number\">3</span>) <span class=\"comment\">// 7</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"提前确认\">提前确认<a title=\"#提前确认\" href=\"#提前确认\"></a></h1>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">cal</span>(<span class=\"params\">type</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (type == <span class=\"string\">&#x27;ADD&#x27;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">function</span>(<span class=\"params\">x, y</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> x + y</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">function</span>(<span class=\"params\">x, y</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> x - y</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> add = <span class=\"title function_\">cal</span>(<span class=\"string\">&#x27;ADD&#x27;</span>)</span><br><span class=\"line\"><span class=\"title function_\">add</span>(<span class=\"number\">3</span>, <span class=\"number\">4</span>) <span class=\"comment\">// 7</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> sub = <span class=\"title function_\">cal</span>(<span class=\"string\">&#x27;SUB&#x27;</span>)</span><br><span class=\"line\"><span class=\"title function_\">sub</span>(<span class=\"number\">4</span>, <span class=\"number\">3</span>) <span class=\"comment\">// 1</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"延迟运行\">延迟运行<a title=\"#延迟运行\" href=\"#延迟运行\"></a></h1>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">save</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">function</span>(<span class=\"params\">id</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">toSave</span>(id)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> s = <span class=\"title function_\">save</span>()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// do code ...</span></span><br><span class=\"line\"><span class=\"comment\">// delay</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">s</span>(<span class=\"number\">100</span>) <span class=\"comment\">// save 100 to data</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h1 id=\"性能方面\">性能方面<a title=\"#性能方面\" href=\"#性能方面\"></a></h1>\n<ol>\n<li>存取arguments对象通常要比存取命名参数要慢一点</li>\n<li>一些老版本的浏览器在arguments.length上的实现上是相当慢的</li>\n<li>使用fn.call(…)与fn.bind(…)通常比fn(…)要慢一些</li>\n<li>创建大量嵌套作用域和闭包函数会带来花销，无论是内存还是速度上</li>\n</ol>\n","prev":{"title":"Swift中的Copy on write","link":"2021/11/12/Swift中的Copy on write"},"next":{"title":"React-Native运行原理","link":"2021/11/10/React-Native运行原理"},"plink":"http://hongweichen.github.io/2021/11/11/详解JavaScript柯里化（函数化编程）/","toc":[{"id":"柯里化","title":"柯里化","index":"1"},{"id":"目录","title":"目录","index":"2"},{"id":"参数复用","title":"参数复用","index":"3"},{"id":"提前确认","title":"提前确认","index":"4"},{"id":"延迟运行","title":"延迟运行","index":"5"},{"id":"性能方面","title":"性能方面","index":"6"}],"reading_time":"305 words in 2 min"}